import 'package:money_formatter/money_formatter.dart';

/// –ú–æ–¥–µ–ª—å –ø—Ä–æ–¥—É–∫—Ç–∞.
///
/// –°–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ –Ω–∞–∑–≤–∞–Ω–∏–µ, —Ü–µ–Ω—É, –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏ —Å—Å—ã–ª–∫—É –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.
class ProductEntity {
  /// –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞.
  final String title;

  /// –¶–µ–Ω–∞ —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ–ø–µ–π–∫–∞—Ö. –ë–µ–∑ —Å–∫–∏–¥–∫–∏.
  ///
  /// –ü–æ–¥—É–º–∞–π—Ç–µ –∏ –æ—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ —Ç—Ä–∏ –≤–æ–ø—Ä–æ—Å–∞:
  /// 1. –ü–æ—á–µ–º—É —Ü–µ–Ω–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –∫–æ–ø–µ–π–∫–∞—Ö, –∞ –Ω–µ –≤ —Ä—É–±–ª—è—Ö?
  /// 2. –ü–æ—á–µ–º—É —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö —Ü–µ–Ω—ã - [int], –∞ –Ω–µ [double]?
  /// 3. –ö–∞–∫ –º–æ–∂–Ω–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–¥–∞—á—É —Ü–µ–Ω—ã –∏–Ω–∞—á–µ?
  ///
  /// –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã —Ä–∞–∑–º–µ—Å—Ç–∏—Ç–µ —Ç—É—Ç (–æ–Ω–∏ –±—É–¥—É—Ç –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –ø—Ä–∏ –∫–æ–¥-—Ä–µ–≤—å—é):
  ///
  /// [–û–¢–í–ï–¢–´]
  /// 1. –ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –∏ –º–∞—à–∏–Ω–Ω–æ–π –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç–∏
  /// 2. –û–Ω–∞ –∂–µ –≤ –∫–æ–ø–µ–π–∫–∞—Ö - –∏—Ö –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ. –û–ø—è—Ç—å —Ç–∞–∫–∏ —ç—Ç–æ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É "–Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ–º–æ–≥–æ –º—É—Å–æ—Ä–∞" –≤ –∑–Ω–∞—á–µ–Ω–∏—è—Ö —Å –ø–ª–∞–≤–∞—é—â–µ–π –∑–∞–ø—è—Ç–æ–π
  /// 3. class Price {
  ///       int rubles;
  ///       int pennies
  ///    }
  ///    –∏–ª–∏
  ///    –ü—Ä–∏—Å—ã–ª–∞—Ç—å –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏–µ —É–∂–µ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏ ‚ùï
  final int price;

  /// –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ç–æ–≤–∞—Ä–∞.
  final Category category;

  /// –°—Å—ã–ª–∫–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞.
  final String imageUrl;

  /// –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞.
  ///
  /// –ú–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø–∏—Å–∞–Ω–æ –≤ –≥—Ä–∞–º–º–∞—Ö [Grams] –∏–ª–∏ –≤ —à—Ç—É–∫–∞—Ö [Quantity].
  final Amount amount;

  /// –°–∫–∏–¥–∫–∞ –Ω–∞ —Ç–æ–≤–∞—Ä.
  ///
  /// –¢—Ä–µ–±—É–µ—Ç—Å—è –≤—ã—Å—á–∏—Ç–∞—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –∏—Ç–æ–≥–æ–≤—É—é —Ü–µ–Ω—É —Ç–æ–≤–∞—Ä–∞.
  /// –≠—Ç–æ –∫–∞–∫–æ–π-—Ç–æ –±–µ—Å–ø—Ä–µ–¥–µ–ª ü§®
  final double sale;

  /// –ò—Ç–æ–≥–æ–≤–∞—è —Ü–µ–Ω–∞ –≤ –∫–æ–ø–µ–π–∫–∞—Ö
  double get totalPrice {
    final discount = 1 - sale/100;
    return price * discount;
  }

  /// UI presentation
  String get startPriceString => MoneyFormatter(amount: price/100).output.nonSymbol;
  String get totalPriceString => MoneyFormatter(amount: totalPrice/100).output.nonSymbol;

  String get totalAmountString => amount.toString();

  ProductEntity({
    required this.title,
    required this.price,
    required this.category,
    required this.imageUrl,
    required this.amount,
    this.sale = 0,
  });
}

/// –ö–ª–∞—Å—Å, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞.
sealed class Amount {
  int get value;
}

/// –ö–ª–∞—Å—Å, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞ –≤ –≥—Ä–∞–º–º–∞—Ö.
class Grams implements Amount {
  @override
  final int value;

  @override
  String toString() {
    return '${value/1000} –∫–≥';
  }

  Grams(this.value);

}

/// –ö–ª–∞—Å—Å, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞ –≤ —à—Ç—É–∫–∞—Ö.
class Quantity implements Amount {
  @override
  final int value;

  @override
  String toString() {
    return '$value —à—Ç';
  }

  Quantity(this.value);
}

/// –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ç–æ–≤–∞—Ä–∞.
enum Category {
  food('–ü—Ä–æ–¥—É–∫—Ç—ã –ø–∏—Ç–∞–Ω–∏—è'),
  tech('–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã'),
  care('–£—Ö–æ–¥'),
  drinks('–ù–∞–ø–∏—Ç–∫–∏'),
  drugs('–ú–µ–¥–∏–∫–∞–º–µ–Ω—Ç—ã');

  final String name;

  const Category(this.name);
}
